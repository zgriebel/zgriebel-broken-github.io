<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zach">
<meta name="dcterms.date" content="2030-05-23">

<title>Redefining the Grip Strength Standard</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Grip-Strength_files/libs/clipboard/clipboard.min.js"></script>
<script src="Grip-Strength_files/libs/quarto-html/quarto.js"></script>
<script src="Grip-Strength_files/libs/quarto-html/popper.min.js"></script>
<script src="Grip-Strength_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Grip-Strength_files/libs/quarto-html/anchor.min.js"></script>
<link href="Grip-Strength_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Grip-Strength_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Grip-Strength_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Grip-Strength_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Grip-Strength_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Redefining the Grip Strength Standard</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Zach </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 23, 2030</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="problem" class="level2">
<h2 class="anchored" data-anchor-id="problem">Problem</h2>
<p>Grip-Strength is a measurable that is used in medical diagnoses and analysis in a variety of applications. Current literature links grip strength in being a strong indicator with Cardiovascular disease. Higher Grip strength is associated with better mental health and earlier death. And the average cost of hand/finger work injury compensation claims is $25,904</p>
<section id="how-are-grip-strength-results-evaluated" class="level3">
<h3 class="anchored" data-anchor-id="how-are-grip-strength-results-evaluated">How are grip-strength results evaluated?</h3>
<p>A protocol using a Dynamometer measures grip-strength.</p>
<p><img src="images/dynomometer.jpg" class="img-fluid"></p>
<p>Grip-Strength results are compared to the AMA normative values to determine deviation from normal. The normative values were determined in 1970 and use just one feature; age, to stratify the normative values.</p>
<p><img src="images/ama_study.jpg" class="img-fluid"></p>
</section>
<section id="thesis" class="level3">
<h3 class="anchored" data-anchor-id="thesis">Thesis</h3>
<p>The current normative values used by the American Medical association are insufficient and out-dated, this has the potential for misdiagnosis or misevaluation for financial compensation.</p>
</section>
<section id="misevaluation-example" class="level3">
<h3 class="anchored" data-anchor-id="misevaluation-example">Misevaluation Example</h3>
<p>Evaluating strength loss from an injury is how work compensation claims are valued. This claim is how injured workers can for their medical bills, make up for lost wages and can be compensated for permanent impairment. As stated above these claims have serious financial implications behind them.</p>
<p>The example case of a evaluation is two 28 year old males with different body types and backgrounds. A non-injured Sedentary worker and an injured manual laborer. The American Medical Association determines the normative grip strength is 48.5Kg for males in the 20-30 age range.</p>
<p><img src="images/ama_28yrsold.jpg" class="img-fluid"></p>
<p><img src="images/Screenshot%202023-12-05%20083540.jpg" class="img-fluid"></p>
<p>In this scenario the sedentary worker is incorrectly diagnosed as <strong>Injured.</strong> This could prompt wasted resources attempting to diagnose the injury. This additionally would lead to wrongfully receiving work injury compensation for an injury that does not occur. Conversely, the manual laborer has a permanent injury and strength loss that will effect him the rest of his life. Due to inadequate data from the American Medical Association this laborer will not receive proper assistance because he is incorrectly identified as <strong>Non-Injured</strong>.</p>
</section>
<section id="hypothesis-1" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis-1">Hypothesis 1</h3>
<p>- <strong>Additional factors then age should be considered for grip strength comparison .</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tibble' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'forcats' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lubridate' was built under R version 4.1.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --
v dplyr     1.1.2     v readr     2.1.4
v forcats   1.0.0     v stringr   1.5.1
v ggplot2   3.4.4     v tibble    3.2.1
v lubridate 1.9.2     v tidyr     1.3.0
v purrr     1.0.1     
-- Conflicts ------------------------------------------ tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()
i Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#df &lt;-read.csv('features_df.csv')</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#head(df)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This data set has already been joined and cleaned.</p>
<p>has 7,878 subjects with 59 features. The patients are from a singular study in a specific radius of location. This data is <strong>not</strong> completely random and <strong>does not</strong> accurately represent America’s population as a whole. For that reason there will be no attempt to redefine normative values. This data will be for analyzing feature relationships. While advanced analysis and decisions were made, the purpose of this project is to visualize support of the claims to the medical community.</p>
<p>Data was further cleaned and modeled using Subset Selection to find the most relevant features in predicting dominant hand grip-strength.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#regfit_full &lt;- regsubsets(DOM_AVG~.,data = men_test)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/feature_selection.jpg" class="img-fluid"></p>
<p>It was found the best predicting Variables in order are:</p>
<ol type="1">
<li><p>Arm Length</p></li>
<li><p>Age</p></li>
<li><p>Arm Circumference</p></li>
<li><p>BMI</p></li>
<li><p>Systolic Blood Pressure</p></li>
</ol>
<p>Age is <strong>not</strong> the first feature selected by the model, and there are additional features that significantly increase accuracy.</p>
<p><img src="images/4_features.jpg" class="img-fluid"></p>
<p>The four features above that are not <code>Age</code> have positive correlations with grip-strength and backs up the claim that there are other features related to grip-strength.</p>
<section id="analyze-correlation-of-other-features-vs-grip-strength" class="level4">
<h4 class="anchored" data-anchor-id="analyze-correlation-of-other-features-vs-grip-strength">Analyze correlation of other features vs grip-strength</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#p1 &lt;- ggplot(df, aes(x=HT_IN , y = dom_hand_strength))+geom_point()+geom_smooth(se = FALSE)+ylim(0,120)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#p2&lt;-ggplot(df, aes(x= WAISTMIN_CM, y = dom_hand_strength))+geom_point()+geom_smooth(se = FALSE)+ylim(0,120)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#p3&lt;-ggplot(df, aes(x= HIPMAX_CM, y = dom_hand_strength))+geom_point()+geom_smooth(se = FALSE)+ylim(0,120)</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#p4&lt;-ggplot(df, aes(x= SBP1 , y = dom_hand_strength))+geom_point()+geom_smooth(se = FALSE)+ylim(0,120)</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#p5&lt;-ggplot(df, aes(x=DBP1 , y = dom_hand_strength))+geom_point()+geom_smooth(se = FALSE)+ylim(0,120)</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">#p6&lt;-ggplot(df, aes(x= PULSE_30, y = dom_hand_strength))+geom_point()+geom_smooth(se = FALSE)+ylim(0,120)</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#p7&lt;-ggplot(df, aes(x= FATPERC, y = dom_hand_strength))+geom_point()+geom_smooth(se = FALSE)+ylim(0,120)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section" class="level4">
<h4 class="anchored" data-anchor-id="section"></h4>
<p>The goal of individual feature charts is to look for a trend line within with some kind of correlation through the dense part of graph</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#p1+p2/p3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/p1-2-3.png" class="img-fluid"></p>
<p>Height, BMI and Waist measurement all have positive correlation with Grip-Strength</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#p4+p6/p7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/p4-5-6.png" class="img-fluid"></p>
<p>Within the dense part of these graphs Pulse, Body Fat Percent and Age have negative correlations with Grip-Strength.</p>
<p>We can see there are other variables that are related to grip-strength and utilizing more than just <code>age</code> would help the medical community diagnose more accuratley.</p>
</section>
<section id="specific-predicting-ability" class="level4">
<h4 class="anchored" data-anchor-id="specific-predicting-ability">Specific Predicting Ability</h4>
<p>When stratifying by age group and utilizing multiple features, models can predict grip-strength far more accurately. Above 60 years of age was used in the below graph because the most complete and largest data is a senior population dataset. <img src="images/60prediction.jpg" class="img-fluid"></p>
<p>The goal of this model was to analyze feature selection and the benefits of adding features other than age. Age once again was second to a body length measurement. And adding body composition statistics significantly raised our RSQ that suggests with some more work a model could get relatively accurate predictions.</p>
</section>
<section id="conclusion-on-hypothesis---1" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-on-hypothesis---1">Conclusion on Hypothesis - 1</h4>
<p>Age may not be the best singular predictor for grip-strength and there are multiple features that significantly adds accuracy when predicting grip strength. With the gravity in a patient’s compensation is placed on comparing to AMA normative values, additional features should be considered to ensure patients get categorized properly.</p>
</section>
</section>
<section id="hypothesis-2" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis-2">Hypothesis 2</h3>
<p><strong>- In the last 50 years the average human body has changed</strong></p>
<p><img src="images/1970.jpg" class="img-fluid"></p>
<p>We have all heard that technology has changed the average American body. As a population we have less manual jobs, obesity is far higher and our postures have been altered. The AMA study that defines normative grip strength was from 1970, over half a century ago. So the question needs to be asked, have humans developed enough that the AMA normative values are outdated?</p>
<section id="data-analysis" class="level4">
<h4 class="anchored" data-anchor-id="data-analysis">Data Analysis</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Men_overtime.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">With such large sample size confidence intervals are not visible.</figcaption>
</figure>
</div>
<p>The average grip strength for this population from 1970 is higher than 2014. This aligns with the hypothesis that Americans have begun working less manual jobs along with less physical activity and have consequently become weaker.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/women_overtime.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Again, with a large sample size confidence intervals are minuscule.</figcaption>
</figure>
</div>
<p>In general women in 2014 are stronger than women in 1970. Socially there has been a clear shift in gender roles from 1970 to today society and this could be one explanation for the distinction. As for the spike in 1970 ages 30-39. The scope of this study is not focused on causes of the anomaly, and more research would need to be done.</p>
<p>Women today are found to be stronger than when the original study was done and Men today are found to have gotten weaker. As stated above this is not a complete random summary of the United States. For that reason findings of both men and women can only strongly suggest that the Average American’s grip strength has significantly changed since these normative values were determined.</p>
</section>
</section>
</section>
<section id="final-conclusion" class="level2">
<h2 class="anchored" data-anchor-id="final-conclusion">Final Conclusion</h2>
<p>Determining a patient’s Grip-Strength deviation from normal is critical to many medical processes. However, the determined normal may be inadequate data. The results from this project suggest that the normal values are outdated and too general. The recommendation is that a new study be preformed to determine new normal values with additional measurements. All of this would be to ensure patients receive the proper care they require.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>